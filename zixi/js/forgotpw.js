$(document).ready(function(){$("input[type=button]").bind("click",function(){checkAll()})});var errmsg={0:"昵称不能为空！",1:"邮箱不能为空！",2:"邮箱格式不正确！",3:"发生不知名的错误，数据丢失！",4:"该账号邮箱不存在！"};function checkAll(){if(!checkEmail()){return false}$.ajax({type:"POST",url:"./?a=email_check",data:{member_email:$("#memail").val()},cache:false,async:false,success:function(a){switch(a){case"0":$("#error-text").empty();$("#error-text").append("&nbsp;"+errmsg[3]);break;case"1":document.forgotpwForm.submit();break;case"2":$("#error-text").empty();$("#error-text").append("&nbsp;"+errmsg[4])}}})}function checkEmail(){if(!checkSpace("memail",1)){return false}if(!isEmail($("#memail").val())){$("#error-text").empty();$("#error-text").append(errmsg[2]);return false}$("#error-text").empty();return true}function isEmail(a){if(a.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)!=-1){return true}return false}function checkSpace(e,b){var d=$("#"+e).val();d=trim(d);var a="#error-text";if(d==""){$(a).empty();var c="&nbsp;"+errmsg[b];$(a).append(c);return false}$(a).empty();return true}function trim(a){return a.replace(/\s+$|^\s+/g,"")};