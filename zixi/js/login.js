$(document).ready(function(){$("#btg_login").bind("click",function(){checkAll()})});var errmsg={0:"",1:"邮箱不能为空！",2:"邮箱格式不正确！",3:"登录密码不能为空！",4:"该账号邮箱不存在！",5:"该账号密码不正确！"};function checkAll(){if(!checkEmail()){return false}if(!checkPassword()){return false}$.ajax({type:"POST",url:"./?a=login_check",data:{member_email:$("#member_email").val(),password:$("#password").val()},cache:false,async:false,success:function(a){switch(a){case"0":$("#error-text").empty();$("#error-text").append("&nbsp;"+errmsg[3]);break;case"1":$("#error-text").empty();$("#error-text").append("&nbsp;"+errmsg[4]);break;case"2":$("#error-text").empty();$("#error-text").append("&nbsp;"+errmsg[5]);break;case"3":document.loginForm.submit();break}}})}function checkEmail(){if(!checkSpace("member_email",1)){return false}if(!isEmail($("#member_email").val())){$("#error-text").empty();$("#error-text").append(errmsg[2]);return false}$("#error-text").empty();return true}function checkPassword(){if(!checkSpace("password",3)){return false}$("#error-text").empty();return true}function isEmail(a){if(a.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)!=-1){return true}return false}function checkSpace(e,b){var d=$("#"+e).val();d=trim(d);var a="#error-text";if(d==""){$(a).empty();var c="&nbsp;"+errmsg[b];$(a).append(c);return false}$(a).empty();return true}function trim(a){return a.replace(/\s+$|^\s+/g,"")};